@inherits CodeBehind.PuzzleBoxBase
@using Bitmasks

@{
    var given = IsGiven ? "given" : string.Empty;

    var boundaryNorth = (Boundary & BoundaryBitmask.North) != BoundaryBitmask.None
        ? "boundary-north" : string.Empty;
    var boundaryEast = (Boundary & BoundaryBitmask.East) != BoundaryBitmask.None
        ? "boundary-east" : string.Empty;
    var boundarySouth = (Boundary & BoundaryBitmask.South) != BoundaryBitmask.None
        ? "boundary-south" : string.Empty;
    var boundaryWest = (Boundary & BoundaryBitmask.West) != BoundaryBitmask.None
        ? "boundary-west" : string.Empty;

    var conflicted = IsConflicted ? "conflicted" : string.Empty;
    var boundaryConflicted = IsBoundaryConflicted ? "boundary-conflicted" : string.Empty;
}

<td>
    <div class="box
         @given
         @boundaryNorth @boundaryEast @boundarySouth @boundaryWest
         @boundaryConflicted @conflicted" id="box-@ID">
        <div class="value">@Value</div>
        <div class="helper-value">@HelperValue</div>
        <table class="helpers">
            <tbody>
                @for (var row = 0; row < 3; ++row)
                {
                    <tr>
                        @for (var column = 0; column < 3; ++column)
                        {
                            var digit = row * 3 + column + 1;

                            <td class="helper" id="helper-@row"
                                @onmouseover="() => Helper_MouseOver(digit)"
                                @onmouseout="Helper_MouseOut"
                                @onclick="() => Helper_Click(digit)"></td>
                        }
                    </tr>
                }
                </tbody>
        </table>
    </div>
</td>